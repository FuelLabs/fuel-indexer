<!DOCTYPE HTML>
<html lang="en" class="sidebar-visible no-js light">
    <head>
        <!-- Book generated using mdBook -->
        <meta charset="UTF-8">
        <title>Environment Setup - The Fuel Indexer Service</title>


        <!-- Custom HTML head -->
        
        <meta name="description" content="">
        <meta name="viewport" content="width=device-width, initial-scale=1">
        <meta name="theme-color" content="#ffffff" />

        <link rel="icon" href="../favicon.svg">
        <link rel="shortcut icon" href="../favicon.png">
        <link rel="stylesheet" href="../css/variables.css">
        <link rel="stylesheet" href="../css/general.css">
        <link rel="stylesheet" href="../css/chrome.css">
        <link rel="stylesheet" href="../css/print.css" media="print">

        <!-- Fonts -->
        <link rel="stylesheet" href="../FontAwesome/css/font-awesome.css">
        <link rel="stylesheet" href="../fonts/fonts.css">

        <!-- Highlight.js Stylesheets -->
        <link rel="stylesheet" href="../highlight.css">
        <link rel="stylesheet" href="../tomorrow-night.css">
        <link rel="stylesheet" href="../ayu-highlight.css">

        <!-- Custom theme stylesheets -->

    </head>
    <body>
    <div id="body-container">
        <!-- Provide site root to javascript -->
        <script>
            var path_to_root = "../";
            var default_theme = window.matchMedia("(prefers-color-scheme: dark)").matches ? "navy" : "light";
        </script>

        <!-- Work around some values being stored in localStorage wrapped in quotes -->
        <script>
            try {
                var theme = localStorage.getItem('mdbook-theme');
                var sidebar = localStorage.getItem('mdbook-sidebar');

                if (theme.startsWith('"') && theme.endsWith('"')) {
                    localStorage.setItem('mdbook-theme', theme.slice(1, theme.length - 1));
                }

                if (sidebar.startsWith('"') && sidebar.endsWith('"')) {
                    localStorage.setItem('mdbook-sidebar', sidebar.slice(1, sidebar.length - 1));
                }
            } catch (e) { }
        </script>

        <!-- Set the theme before any content is loaded, prevents flash -->
        <script>
            var theme;
            try { theme = localStorage.getItem('mdbook-theme'); } catch(e) { }
            if (theme === null || theme === undefined) { theme = default_theme; }
            var html = document.querySelector('html');
            html.classList.remove('no-js')
            html.classList.remove('light')
            html.classList.add(theme);
            html.classList.add('js');
        </script>

        <!-- Hide / unhide sidebar before it is displayed -->
        <script>
            var html = document.querySelector('html');
            var sidebar = null;
            if (document.body.clientWidth >= 1080) {
                try { sidebar = localStorage.getItem('mdbook-sidebar'); } catch(e) { }
                sidebar = sidebar || 'visible';
            } else {
                sidebar = 'hidden';
            }
            html.classList.remove('sidebar-visible');
            html.classList.add("sidebar-" + sidebar);
        </script>

        <nav id="sidebar" class="sidebar" aria-label="Table of contents">
            <div class="sidebar-scrollbox">
                <ol class="chapter"><li class="chapter-item expanded affix "><a href="../index.html">The Fuel Indexer</a></li><li class="chapter-item expanded affix "><li class="part-title">Getting Started</li><li class="chapter-item expanded "><a href="../getting-started/dependencies.html"><strong aria-hidden="true">1.</strong> Dependencies</a></li><li class="chapter-item expanded "><a href="../getting-started/quickstart.html"><strong aria-hidden="true">2.</strong> Quickstart</a></li><li class="chapter-item expanded "><a href="../getting-started/hello-world.html"><strong aria-hidden="true">3.</strong> Hello World</a></li><li class="chapter-item expanded "><a href="../getting-started/starting-the-fuel-indexer.html"><strong aria-hidden="true">4.</strong> Starting the Fuel Indexer</a></li><li class="chapter-item expanded affix "><li class="part-title">Reference Guide</li><li class="chapter-item expanded "><a href="../project-components/index.html"><strong aria-hidden="true">5.</strong> Project Components</a></li><li><ol class="section"><li class="chapter-item expanded "><a href="../project-components/manifest.html"><strong aria-hidden="true">5.1.</strong> Manifest</a></li><li class="chapter-item expanded "><a href="../project-components/schema.html"><strong aria-hidden="true">5.2.</strong> Schema</a></li><li class="chapter-item expanded "><a href="../project-components/module.html"><strong aria-hidden="true">5.3.</strong> Module</a></li></ol></li><li class="chapter-item expanded "><a href="../indexing/index.html"><strong aria-hidden="true">6.</strong> Indexing</a></li><li><ol class="section"><li class="chapter-item expanded "><a href="../indexing/blocks-and-transactions.html"><strong aria-hidden="true">6.1.</strong> Blocks and Transactions</a></li><li class="chapter-item expanded "><a href="../indexing/receipts.html"><strong aria-hidden="true">6.2.</strong> Receipts</a></li><li class="chapter-item expanded "><a href="../indexing/burn.html"><strong aria-hidden="true">6.3.</strong> Burn</a></li><li class="chapter-item expanded "><a href="../indexing/call.html"><strong aria-hidden="true">6.4.</strong> Call</a></li><li class="chapter-item expanded "><a href="../indexing/log.html"><strong aria-hidden="true">6.5.</strong> Log</a></li><li class="chapter-item expanded "><a href="../indexing/logdata.html"><strong aria-hidden="true">6.6.</strong> LogData</a></li><li class="chapter-item expanded "><a href="../indexing/messageout.html"><strong aria-hidden="true">6.7.</strong> MessageOut</a></li><li class="chapter-item expanded "><a href="../indexing/mint.html"><strong aria-hidden="true">6.8.</strong> Mint</a></li><li class="chapter-item expanded "><a href="../indexing/panic.html"><strong aria-hidden="true">6.9.</strong> Panic</a></li><li class="chapter-item expanded "><a href="../indexing/return.html"><strong aria-hidden="true">6.10.</strong> Return</a></li><li class="chapter-item expanded "><a href="../indexing/returndata.html"><strong aria-hidden="true">6.11.</strong> ReturnData</a></li><li class="chapter-item expanded "><a href="../indexing/revert.html"><strong aria-hidden="true">6.12.</strong> Revert</a></li><li class="chapter-item expanded "><a href="../indexing/scriptresult.html"><strong aria-hidden="true">6.13.</strong> ScriptResult</a></li><li class="chapter-item expanded "><a href="../indexing/transfer.html"><strong aria-hidden="true">6.14.</strong> Transfer</a></li><li class="chapter-item expanded "><a href="../indexing/transferout.html"><strong aria-hidden="true">6.15.</strong> TransferOut</a></li></ol></li><li class="chapter-item expanded "><a href="../data-types/types.html"><strong aria-hidden="true">7.</strong> Data Types</a></li><li class="chapter-item expanded "><a href="../graphql/index.html"><strong aria-hidden="true">8.</strong> GraphQL</a></li><li><ol class="section"><li class="chapter-item expanded "><a href="../graphql/directives.html"><strong aria-hidden="true">8.1.</strong> Directives</a></li><li class="chapter-item expanded "><a href="../graphql/api-server.html"><strong aria-hidden="true">8.2.</strong> API Server</a></li><li class="chapter-item expanded "><a href="../graphql/playground.html"><strong aria-hidden="true">8.3.</strong> Playground</a></li></ol></li><li class="chapter-item expanded "><a href="../queries/index.html"><strong aria-hidden="true">9.</strong> Queries</a></li><li><ol class="section"><li class="chapter-item expanded "><a href="../queries/search-filtering.html"><strong aria-hidden="true">9.1.</strong> Search and Filtering</a></li><li class="chapter-item expanded "><a href="../queries/pagination.html"><strong aria-hidden="true">9.2.</strong> Pagination</a></li><li class="chapter-item expanded "><a href="../queries/full-example.html"><strong aria-hidden="true">9.3.</strong> A Full Example</a></li></ol></li><li class="chapter-item expanded "><a href="../database/index.html"><strong aria-hidden="true">10.</strong> Database</a></li><li><ol class="section"><li class="chapter-item expanded "><a href="../database/foreign-keys.html"><strong aria-hidden="true">10.1.</strong> Foreign Keys</a></li><li class="chapter-item expanded "><a href="../database/ids.html"><strong aria-hidden="true">10.2.</strong> ID Types</a></li></ol></li><li class="chapter-item expanded "><a href="../forc-index/index.html"><strong aria-hidden="true">11.</strong> forc index</a></li><li><ol class="section"><li class="chapter-item expanded "><a href="../forc-index/new.html"><strong aria-hidden="true">11.1.</strong> new</a></li><li class="chapter-item expanded "><a href="../forc-index/check.html"><strong aria-hidden="true">11.2.</strong> check</a></li><li class="chapter-item expanded "><a href="../forc-index/build.html"><strong aria-hidden="true">11.3.</strong> build</a></li><li class="chapter-item expanded "><a href="../forc-index/start.html"><strong aria-hidden="true">11.4.</strong> start</a></li><li class="chapter-item expanded "><a href="../forc-index/deploy.html"><strong aria-hidden="true">11.5.</strong> deploy</a></li><li class="chapter-item expanded "><a href="../forc-index/remove.html"><strong aria-hidden="true">11.6.</strong> remove</a></li><li class="chapter-item expanded "><a href="../forc-index/kill.html"><strong aria-hidden="true">11.7.</strong> kill</a></li><li class="chapter-item expanded "><a href="../forc-index/auth.html"><strong aria-hidden="true">11.8.</strong> auth</a></li><li class="chapter-item expanded "><a href="../forc-index/status.html"><strong aria-hidden="true">11.9.</strong> status</a></li></ol></li><li class="chapter-item expanded "><a href="../forc-postgres/index.html"><strong aria-hidden="true">12.</strong> forc index postgres</a></li><li><ol class="section"><li class="chapter-item expanded "><a href="../forc-postgres/create.html"><strong aria-hidden="true">12.1.</strong> create</a></li><li class="chapter-item expanded "><a href="../forc-postgres/start.html"><strong aria-hidden="true">12.2.</strong> start</a></li><li class="chapter-item expanded "><a href="../forc-postgres/stop.html"><strong aria-hidden="true">12.3.</strong> stop</a></li><li class="chapter-item expanded "><a href="../forc-postgres/drop.html"><strong aria-hidden="true">12.4.</strong> drop</a></li></ol></li><li class="chapter-item expanded "><a href="../authentication/index.html"><strong aria-hidden="true">13.</strong> Authentication</a></li><li class="chapter-item expanded affix "><li class="part-title">For Contributors</li><li class="chapter-item expanded "><a href="../for-contributors/index.html" class="active"><strong aria-hidden="true">14.</strong> Environment Setup</a></li><li class="chapter-item expanded "><a href="../for-contributors/contributing-standards.html"><strong aria-hidden="true">15.</strong> Contributing Standards</a></li><li class="chapter-item expanded "><a href="../for-contributors/release-schedule.html"><strong aria-hidden="true">16.</strong> Release Schedule</a></li><li class="chapter-item expanded "><a href="../for-contributors/building-from-source.html"><strong aria-hidden="true">17.</strong> Building From Source</a></li><li class="chapter-item expanded "><a href="../for-contributors/system-dependencies.html"><strong aria-hidden="true">18.</strong> System Dependencides</a></li><li class="chapter-item expanded affix "><li class="part-title">Appendix</li><li class="chapter-item expanded "><a href="../glossary.html"><strong aria-hidden="true">19.</strong> A: Glossary</a></li></ol>
            </div>
            <div id="sidebar-resize-handle" class="sidebar-resize-handle"></div>
        </nav>

        <!-- Track and set sidebar scroll position -->
        <script>
            var sidebarScrollbox = document.querySelector('#sidebar .sidebar-scrollbox');
            sidebarScrollbox.addEventListener('click', function(e) {
                if (e.target.tagName === 'A') {
                    sessionStorage.setItem('sidebar-scroll', sidebarScrollbox.scrollTop);
                }
            }, { passive: true });
            var sidebarScrollTop = sessionStorage.getItem('sidebar-scroll');
            sessionStorage.removeItem('sidebar-scroll');
            if (sidebarScrollTop) {
                // preserve sidebar scroll position when navigating via links within sidebar
                sidebarScrollbox.scrollTop = sidebarScrollTop;
            } else {
                // scroll sidebar to current active section when navigating via "next/previous chapter" buttons
                var activeSection = document.querySelector('#sidebar .active');
                if (activeSection) {
                    activeSection.scrollIntoView({ block: 'center' });
                }
            }
        </script>

        <div id="page-wrapper" class="page-wrapper">

            <div class="page">
                                <div id="menu-bar-hover-placeholder"></div>
                <div id="menu-bar" class="menu-bar sticky">
                    <div class="left-buttons">
                        <button id="sidebar-toggle" class="icon-button" type="button" title="Toggle Table of Contents" aria-label="Toggle Table of Contents" aria-controls="sidebar">
                            <i class="fa fa-bars"></i>
                        </button>
                        <button id="theme-toggle" class="icon-button" type="button" title="Change theme" aria-label="Change theme" aria-haspopup="true" aria-expanded="false" aria-controls="theme-list">
                            <i class="fa fa-paint-brush"></i>
                        </button>
                        <ul id="theme-list" class="theme-popup" aria-label="Themes" role="menu">
                            <li role="none"><button role="menuitem" class="theme" id="light">Light</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="rust">Rust</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="coal">Coal</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="navy">Navy</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="ayu">Ayu</button></li>
                        </ul>
                        <button id="search-toggle" class="icon-button" type="button" title="Search. (Shortkey: s)" aria-label="Toggle Searchbar" aria-expanded="false" aria-keyshortcuts="S" aria-controls="searchbar">
                            <i class="fa fa-search"></i>
                        </button>
                    </div>

                    <h1 class="menu-title">The Fuel Indexer Service</h1>

                    <div class="right-buttons">
                        <a href="../print.html" title="Print this book" aria-label="Print this book">
                            <i id="print-button" class="fa fa-print"></i>
                        </a>
                        <a href="https://github.com/FuelLabs/fuel-indexer" title="Git repository" aria-label="Git repository">
                            <i id="git-repository-button" class="fa fa-github"></i>
                        </a>

                    </div>
                </div>

                <div id="search-wrapper" class="hidden">
                    <form id="searchbar-outer" class="searchbar-outer">
                        <input type="search" id="searchbar" name="searchbar" placeholder="Search this book ..." aria-controls="searchresults-outer" aria-describedby="searchresults-header">
                    </form>
                    <div id="searchresults-outer" class="searchresults-outer hidden">
                        <div id="searchresults-header" class="searchresults-header"></div>
                        <ul id="searchresults">
                        </ul>
                    </div>
                </div>

                <!-- Apply ARIA attributes after the sidebar and the sidebar toggle button are added to the DOM -->
                <script>
                    document.getElementById('sidebar-toggle').setAttribute('aria-expanded', sidebar === 'visible');
                    document.getElementById('sidebar').setAttribute('aria-hidden', sidebar !== 'visible');
                    Array.from(document.querySelectorAll('#sidebar a')).forEach(function(link) {
                        link.setAttribute('tabIndex', sidebar === 'visible' ? 0 : -1);
                    });
                </script>

                <div id="content" class="content">
                    <main>
                        <h1 id="for-contributors"><a class="header" href="#for-contributors">For Contributors</a></h1>
<p>Thanks for your interest in contributing to the Fuel indexer! Below we've compiled a list of sections that you may find useful as you work on a potential contribution:</p>
<ul>
<li><a href="#dependencies">Dependencies</a>
<ul>
<li><a href="#fuelup"><code>fuelup</code></a></li>
<li><a href="#docker"><code>docker</code></a></li>
<li><a href="#database">Database</a>
<ul>
<li><a href="#postgresql">PostgreSQL</a></li>
</ul>
</li>
<li><a href="#sqlx">SQLx</a></li>
</ul>
</li>
<li><a href="#building-from-source">Building from source</a></li>
<li><a href="#run-migrations">Run migrations</a></li>
<li><a href="#start-the-service">Start the service</a></li>
<li><a href="#testing">Testing</a>
<ul>
<li><a href="#default-tests">Default tests</a></li>
<li><a href="#end-to-end-tests">End-to-end tests</a></li>
<li><a href="#trybuild-tests"><code>trybuild</code> tests</a></li>
</ul>
</li>
</ul>
<h2 id="dependencies"><a class="header" href="#dependencies">Dependencies</a></h2>
<h3 id="fuelup"><a class="header" href="#fuelup"><code>fuelup</code></a></h3>
<p>We use fuelup in order to get the binaries produced by services in the Fuel ecosystem. Fuelup will install binaries related to the Fuel node, the Fuel indexer, the Fuel orchestrator (forc), and other components. <code>fuelup</code> can be downloaded <a href="https://github.com/FuelLabs/fuelup">here</a>.</p>
<h3 id="docker"><a class="header" href="#docker"><code>docker</code></a></h3>
<p>We use Docker to produce reproducible environments for users that may be concerned with installing components with large sets of dependencies (e.g. Postgres). Docker can be downloaded <a href="https://docs.docker.com/engine/install/">here</a>.</p>
<h3 id="database"><a class="header" href="#database">Database</a></h3>
<p>At this time, the Fuel indexer requires the use of a database. We currently support a single database option: Postgres. PostgreSQL is a database solution with a complex feature set and requires a database server.</p>
<h4 id="postgresql"><a class="header" href="#postgresql">PostgreSQL</a></h4>
<blockquote>
<p>Note: The following explanation is for demonstration purposes only. A production setup should use secure users, permissions, and passwords.</p>
</blockquote>
<p>On macOS systems, you can install PostgreSQL through Homebrew. If it isn't present on your system, you can install it according to the <a href="https://brew.sh/">instructions</a>. Once installed, you can add PostgreSQL to your system by running <code>brew install postgresql</code>. You can then start the service through <code>brew services start postgresql</code>. You'll need to create a database for your indexed data, which you can do by running <code>createdb [DATABASE_NAME]</code>. You may also need to create the <code>postgres</code> role; you can do so by running <code>createuser -s postgres</code>.</p>
<p>For Linux-based systems, the installation process is similar. First, you should install PostgreSQL according to your distribution's instructions. Once installed, there should be a new <code>postgres</code> user account; you can switch to that account by running <code>sudo -i -u postgres</code>. After you have switched accounts, you may need to create a <code>postgres</code> database role by running <code>createuser --interactive</code>. You will be asked a few questions; the name of the role should be <code>postgres</code> and you should elect for the new role to be a superuser. Finally, you can create a database by running <code>createdb [DATABASE_NAME]</code>.</p>
<p>In either case, your PostgreSQL database should now be accessible at <code>postgres://postgres@localhost:5432/[DATABASE_NAME]</code>.</p>
<h3 id="sqlx"><a class="header" href="#sqlx">SQLx</a></h3>
<p>After setting up your database, you should install <code>sqlx-cli</code> in order to run migrations for your indexer service. You can do so by running <code>cargo install sqlx-cli --features postgres</code>. Once installed, you can run the migrations by running the following command after changing <code>DATABASE_URL</code> to match your setup.</p>
<h2 id="building-from-source"><a class="header" href="#building-from-source">Building from Source</a></h2>
<h3 id="clone-repository"><a class="header" href="#clone-repository">Clone repository</a></h3>
<pre><code class="language-bash">git clone git@github.com:FuelLabs/fuel-indexer.git &amp;&amp; cd fuel-indexer/
</code></pre>
<h3 id="run-migrations"><a class="header" href="#run-migrations">Run migrations</a></h3>
<h4 id="postgres-migrations"><a class="header" href="#postgres-migrations">Postgres migrations</a></h4>
<pre><code class="language-sh">cd packages/fuel-indexer-database/postgres
DATABASE_URL=postgres://postgres@localhost sqlx migrate run
</code></pre>
<h3 id="start-the-service"><a class="header" href="#start-the-service">Start the service</a></h3>
<pre><code class="language-bash">cargo run --bin fuel-indexer run
</code></pre>
<p>You can also start the service with a fresh local node for development purposes:</p>
<pre><code class="language-bash">cargo run --features fuel-core-lib --bin fuel-indexer run
</code></pre>
<blockquote>
<p>If no configuration file or other options are passed, the service will default to a <code>postgres://postgres@localhost</code> database connection.</p>
</blockquote>
<h2 id="testing"><a class="header" href="#testing">Testing</a></h2>
<p>Fuel indexer tests are currently broken out by a database feature flag. In order to run tests with a Postgres backend, use <code>--features postgres</code>.</p>
<p>Further, the indexer uses end-to-end (E2E) tests. In order to trigger these end-to-end tests, you'll want to use the <code>e2e</code> features flag: <code>--features e2e</code>.</p>
<blockquote>
<p>All end-to-end tests also require the use of a database feature. For example, to run the end-to-end tests with a Posgres backend, use <code>--features e2e,postgres</code>.</p>
</blockquote>
<h3 id="default-tests"><a class="header" href="#default-tests">Default tests</a></h3>
<pre><code class="language-bash">cargo test --locked --workspace --all-targets
</code></pre>
<h3 id="end-to-end-tests"><a class="header" href="#end-to-end-tests">End-to-end tests</a></h3>
<pre><code class="language-bash">cargo test --locked --workspace --all-targets --features e2e,postgres
</code></pre>
<h3 id="trybuild-tests"><a class="header" href="#trybuild-tests"><code>trybuild</code> tests</a></h3>
<p>For tests related to the meta-programming used in the Fuel indexer, we use <code>trybuild</code>.</p>
<pre><code class="language-bash">RUSTFLAGS='-D warnings' cargo test -p fuel-indexer-macros --locked
</code></pre>

                    </main>

                    <nav class="nav-wrapper" aria-label="Page navigation">
                        <!-- Mobile navigation buttons -->
                            <a rel="prev" href="../authentication/index.html" class="mobile-nav-chapters previous" title="Previous chapter" aria-label="Previous chapter" aria-keyshortcuts="Left">
                                <i class="fa fa-angle-left"></i>
                            </a>

                            <a rel="next" href="../for-contributors/contributing-standards.html" class="mobile-nav-chapters next" title="Next chapter" aria-label="Next chapter" aria-keyshortcuts="Right">
                                <i class="fa fa-angle-right"></i>
                            </a>

                        <div style="clear: both"></div>
                    </nav>
                </div>
            </div>

            <nav class="nav-wide-wrapper" aria-label="Page navigation">
                    <a rel="prev" href="../authentication/index.html" class="nav-chapters previous" title="Previous chapter" aria-label="Previous chapter" aria-keyshortcuts="Left">
                        <i class="fa fa-angle-left"></i>
                    </a>

                    <a rel="next" href="../for-contributors/contributing-standards.html" class="nav-chapters next" title="Next chapter" aria-label="Next chapter" aria-keyshortcuts="Right">
                        <i class="fa fa-angle-right"></i>
                    </a>
            </nav>

        </div>




        <script>
            window.playground_copyable = true;
        </script>


        <script src="../elasticlunr.min.js"></script>
        <script src="../mark.min.js"></script>
        <script src="../searcher.js"></script>

        <script src="../clipboard.min.js"></script>
        <script src="../highlight.js"></script>
        <script src="../book.js"></script>

        <!-- Custom JS scripts -->


    </div>
    </body>
</html>
